<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<script src="../axios.js"></script>
		<link rel="stylesheet" href="css/index.css" />
	</head>
	<body>
		<div class="container">
			<div class="login">
				<h1>登录</h1>
				<ul>
					<li>
						账号:<input type="text" name="" id="user" placeholder="输入用户名" />
					</li>
					<li>
						密码:<input type="password" name="" id="pwd" placeholder="输入密码" />
					</li>
					<li style="text-align: center">
						<input type="submit" value="登录" class="btn"/>
					</li>
				</ul>
				<!-- 注册模块 -->
				<div class="register">
					还没账号？
					<a href="javascript:;">去注册</a>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			const userInfo = document.querySelector('#user')
			const pwdInfo = document.querySelector('#pwd')
			const btn = document.querySelector('.btn')
			btn.addEventListener('click', function() {
				// console.log(userInfo.value, pwdInfo.value)
				if(userInfo.value == '' || pwdInfo.value == '') {
					alert('账号或密码不能为空！')
				} else {
					axios({
						method: 'post',
						url: 'http://127.0.0.1/api/login',
						params: {
							username: userInfo.value,
							password: pwdInfo.value
						}
					}).then(res => {
						// console.log(pwdInfo.value)
						// console.log(userInfo.value)
						console.log(res.data)
						if(res.data.status === 1) {
							alert(res.data.message)
						} else {
							location.href = 'http://127.0.0.1:5500/%E5%93%81%E4%BC%98%E8%B4%AD%E9%A1%B9%E7%9B%AE/index.html'
						}
					})
				}
			})
		</script>
	</body>
</html>
